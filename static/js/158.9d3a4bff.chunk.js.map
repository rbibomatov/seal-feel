{"version":3,"file":"static/js/158.9d3a4bff.chunk.js","mappings":"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","sources":["webpack://seal-feel/./src/components/Content/Messages/Messages.module.css?8c3e","webpack://seal-feel/./src/components/Content/Messages/Dialog/Dialog.module.css?2e48","components/Content/Messages/Dialog/Dialog.jsx","webpack://seal-feel/./src/components/Content/Messages/Message/Message.module.css?cc17","components/Content/Messages/Message/Message.jsx","webpack://seal-feel/./src/components/Forms/AddMessageForm/AddMessageForm.module.css?6060","components/Forms/AddMessageForm/AddMessageForm.jsx","components/Content/Messages/Messages.jsx","hoc/withAuthRedirect.jsx","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/v4.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dialogs\":\"Messages_dialogs__n0pJ5\",\"messages\":\"Messages_messages__8r9mg\",\"newMessage\":\"Messages_newMessage__iEX3w\",\"noDialogsElement\":\"Messages_noDialogsElement__Hl0w8\",\"noMessagesElement\":\"Messages_noMessagesElement__rINvx\"};","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"Dialog_dialog__XYJhc\",\"activeDialog\":\"Dialog_activeDialog__dwMbY\",\"userPhoto\":\"Dialog_userPhoto__qdtOa\",\"userName\":\"Dialog_userName__h-yEF\"};","import styles from \"./Dialog.module.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { setRecipient } from \"../../../../redux/messages.reducer\";\r\n\r\nconst Dialog = (props) => {\r\n  const dispatch = useDispatch();\r\n  let dialogClass = styles.dialog;\r\n\r\n  if (props.activeRecipientId === props.id) {\r\n    dialogClass += \" \" + styles.activeDialog;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={dialogClass}\r\n      onClick={() => dispatch(setRecipient(props.id))}\r\n    >\r\n      <NavLink to={\"/profile/\" + props.id}>\r\n        <img\r\n          className={styles.userPhoto}\r\n          src={props.photo}\r\n          alt=\"Фото пользователя\"\r\n        />\r\n      </NavLink>\r\n      <span className={styles.userName}> {props.name}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dialog;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"message\":\"Message_message__ZFsXl\",\"senderPhoto\":\"Message_senderPhoto__5btvE\",\"infoBar\":\"Message_infoBar__oZCTu\",\"senderName\":\"Message_senderName__f5-wS\",\"sendTime\":\"Message_sendTime__yty+l\",\"messageText\":\"Message_messageText__664Mm\"};","import styles from \"./Message.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst Message = (props) => {\r\n  return (\r\n    <div className={styles.message}>\r\n      <NavLink to={\"/profile/\" + props.senderId}>\r\n        <img\r\n          className={styles.senderPhoto}\r\n          src={props.senderPhoto}\r\n          alt=\"Фото пользователя\"\r\n        />\r\n      </NavLink>\r\n\r\n      <div className={styles.infoBar}>\r\n        <span className={styles.senderName}> {props.senderName}</span>\r\n        <span className={styles.sendTime}>\r\n          {props.createTime.toTimeString().slice(0, 5)}\r\n        </span>\r\n        <div className={styles.messageText}>{props.message}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"addMessageArea\":\"AddMessageForm_addMessageArea__381Px\",\"addMessageButton\":\"AddMessageForm_addMessageButton__MZKtL\"};","import styles from \"./AddMessageForm.module.css\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addMessage } from \"../../../redux/messages.reducer\";\r\nimport ValidationMessage from \"../../Common/ValidationMessage/ValidationMessage\";\r\n\r\nconst AddMessageForm = (props) => {\r\n  const {\r\n    register,\r\n    formState: { errors },\r\n    handleSubmit,\r\n    reset,\r\n  } = useForm();\r\n\r\n  const currentUser = useSelector((state) => state.auth.currentUser);\r\n  const recipientId = useSelector(\r\n    (state) => state.messagesPage.activeRecipientId\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  const onSubmit = (data) => {\r\n    dispatch(addMessage(data.messageText, currentUser, recipientId));\r\n    reset();\r\n  };\r\n\r\n  const onKeyDown = (e) => {\r\n    if ((e.key === \"Enter\" || e.code === \"NumpadEnter\") && !e.shiftKey) {\r\n      e.preventDefault();\r\n      document.getElementById(\"addMessageButton\").click();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n      <textarea\r\n        className={styles.addMessageArea}\r\n        {...register(\"messageText\", {\r\n          required: \"Пожалуйста, заполните поле\",\r\n          maxLength: {\r\n            value: 1000,\r\n            message: \"Длина текста не должна превышать 1000 символов\",\r\n          },\r\n        })}\r\n        placeholder=\"Введите свое сообщение...\"\r\n        onKeyDown={onKeyDown}\r\n      ></textarea>\r\n      <ValidationMessage messageText={errors?.messageText?.message} />\r\n      <div>\r\n        <button\r\n          id=\"addMessageButton\"\r\n          className={styles.addMessageButton}\r\n          type=\"submit\"\r\n        >\r\n          Отправить\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AddMessageForm;\r\n","import styles from \"./Messages.module.css\";\r\nimport withAuthRedirect from \"../../../hoc/withAuthRedirect\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Dialog from \"./Dialog/Dialog\";\r\nimport Message from \"./Message/Message\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport AddMessageForm from \"../../Forms/AddMessageForm/AddMessageForm\";\r\n\r\nconst Messages = (props) => {\r\n  const dialogs = useSelector((state) => state.messagesPage.dialogs);\r\n  const messages = useSelector((state) => state.messagesPage.messages);\r\n  const activeRecipientId = useSelector(\r\n    (state) => state.messagesPage.activeRecipientId\r\n  );\r\n\r\n  const noDialogsElement = (\r\n    <div className={styles.noDialogsElement}>\r\n      Диалоги на текущий момент отсутствуют\r\n    </div>\r\n  );\r\n\r\n  const noMessagesElement = (\r\n    <div className={styles.noMessagesElement}>\r\n      Сообщения на текущий момент отсутствуют\r\n    </div>\r\n  );\r\n\r\n  const dialogsElements = dialogs.map((dialog) => {\r\n    return (\r\n      <Dialog\r\n        key={uuidv4()}\r\n        {...dialog}\r\n        activeRecipientId={activeRecipientId}\r\n      />\r\n    );\r\n  });\r\n\r\n  const messagesElements = messages.reduce((messages, message) => {\r\n    if (activeRecipientId === message.recipientId) {\r\n      messages.push(<Message key={uuidv4()} {...message} />);\r\n    }\r\n\r\n    return messages;\r\n  }, []);\r\n\r\n  const pageElement = (\r\n    <div className={styles.dialogs}>\r\n      <div>{dialogsElements}</div>\r\n      <div className={styles.messages}>\r\n        {messagesElements.length ? messagesElements : noMessagesElement}\r\n      </div>\r\n      <div className={styles.newMessage}>\r\n        <AddMessageForm />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return dialogs.length ? pageElement : noDialogsElement;\r\n};\r\n\r\nexport default withAuthRedirect(Messages);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    isAuth: state.auth.isAuth,\r\n  };\r\n};\r\n\r\nconst withAuthRedirect = (Component) => {\r\n  const RedirectComponent = (props) => {\r\n    if (!props.isAuth) {\r\n      return <Navigate to=\"/login\" />;\r\n    }\r\n\r\n    return <Component {...props} />;\r\n  };\r\n\r\n  return connect(mapStateToProps)(RedirectComponent);\r\n};\r\n\r\nexport default withAuthRedirect;\r\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;"],"names":["props","dispatch","useDispatch","dialogClass","styles","activeRecipientId","id","className","onClick","setRecipient","to","src","photo","alt","name","senderId","senderPhoto","senderName","createTime","toTimeString","slice","message","useForm","register","errors","formState","handleSubmit","reset","currentUser","useSelector","state","auth","recipientId","messagesPage","onSubmit","data","addMessage","messageText","required","maxLength","value","placeholder","onKeyDown","e","key","code","shiftKey","preventDefault","document","getElementById","click","ValidationMessage","type","withAuthRedirect","dialogs","messages","noDialogsElement","noMessagesElement","dialogsElements","map","dialog","uuidv4","messagesElements","reduce","push","pageElement","length","mapStateToProps","isAuth","Component","connect","getRandomValues","randomUUID","crypto","bind","rnds8","Uint8Array","rng","Error","byteToHex","i","toString","unsafeStringify","arr","offset","toLowerCase","options","buf","native","rnds","random"],"sourceRoot":""}